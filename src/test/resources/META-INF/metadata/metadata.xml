<?xml version="1.0" encoding="utf-8"?>
<binding implementationTarget="BLOG"
         xmlns="http://www.fg.cz/xsd/adam"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.fg.cz/xsd/adam http://www.fg.cz/xsd/adam_2-0.xsd">
    <entity name="blogPost" table="T_BLOG_POST">
        <metadataBundle default="true" loadByDefault="true" name="standardMetadata" table="T_BLOG_POST">
            <autoloadMetadata filter="allMissing"/>
            <metadata name="author" colName="idAuthor" extensionTable="T_BLOG_AUTHOR"/>
            <metadata name="blog" colName="idBlog" extensionTable="T_BLOG_SITE"/>
        </metadataBundle>        
    </entity>

    <entity viewName="versionedBlogPost" name="blogPost" table="T_BLOG_POST">
        <metadataBundle default="true" loadByDefault="true" name="standardMetadata" table="T_BLOG_POST">
            <autoloadMetadata filter="allMissing"/>
            <metadata name="author" colName="idAuthor" extensionTable="T_BLOG_AUTHOR"/>
            <metadata name="blog" colName="idBlog" extensionTable="T_BLOG_SITE"/>
        </metadataBundle>
        <metadataBundle name="contentMetadata" multiplicity="1:1" versioned="true" table="T_BLOG_POST_DATA" refKey="idPost"/>
        <metadataBundle name="relations" loadByDefault="false" multiplicity="1:N" versioned="true" table="T_BLOG_POST_RELATION" refKey="idPost"/>
        <metadataBundle name="categories" loadByDefault="false" multiplicity="1:N" versioned="true" table="T_BLOG_POST_CATEGORY" refKey="idPost">
            <autoloadMetadata filter="allMissing"/>
            <metadata name="category" colName="idCategory" extensionTable="T_BLOG_CATEGORY"/>
        </metadataBundle>
        <metadataBundle name="tags" loadByDefault="false" multiplicity="1:N" versioned="true" table="T_BLOG_POST_TAG" refKey="idPost">
            <autoloadMetadata filter="allMissing"/>
            <metadata name="tag" colName="idTag" extensionTable="T_BLOG_TAG" primaryKey="id"/>
        </metadataBundle>
    </entity>
</binding>